<div class="container mx-auto p-4">
  <div *ngIf="error" class="text-red-500 mb-4 bg-red-100 p-2 rounded">{{ error }}</div>
  <div *ngIf="post; else loading" class="bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-3xl font-bold mb-2 text-gray-800 relative">
      {{ post.title }}
      <span class="block w-16 h-1 bg-blue-500 mt-2"></span>
    </h2>
    <img *ngIf="post.photo" [src]="post.photo" alt="{{ post.title }}" class="w-full max-w-lg mb-4 rounded-lg object-cover shadow-sm">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <p class="text-gray-700"><span class="font-semibold text-blue-600">Автор:</span> {{ post.author.username }}</p>
      <p class="text-gray-700"><span class="font-semibold text-blue-600">Категория:</span> {{ post.category.name }}</p>
      <p class="text-gray-700 col-span-2"><span class="font-semibold text-blue-600">Краткое описание:</span> <span class="italic bg-blue-50 p-1 rounded">{{ post.anons }}</span></p>
      <p class="text-gray-700 col-span-2 whitespace-pre-wrap"><span class="font-semibold text-blue-600">Ингредиенты:</span> {{ post.ingredients }}</p>
    </div>
    <div class="mb-4">
      <h3 class="text-xl font-bold text-gray-800 mb-3">Шаги приготовления:</h3>
      <ol class="space-y-3">
        <li *ngFor="let step of getSteps(); let i = index" class="flex items-start p-3 bg-blue-50 rounded-lg shadow-sm animate-fade-in">
          <span class="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-blue-500 text-white rounded-full mr-3">
            {{ i + 1 }}
          </span>
          <span class="text-gray-700">{{ step }}</span>
        </li>
      </ol>
      <p *ngIf="getSteps().length === 0" class="text-gray-500 italic">Шаги не указаны</p>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <p class="text-gray-600"><span class="font-semibold text-blue-600">Создано:</span> {{ post.dateCreate | date }}</p>
      <p class="text-gray-600"><span class="font-semibold text-blue-600">Обновлено:</span> {{ post.dateUpdate | date }}</p>
    </div>
    <div class="flex space-x-4">
      <a [routerLink]="['/posts']" class="text-blue-500 hover:underline hover:text-blue-600 transition duration-200">На главный экран</a>
      <a *ngIf="isAuthor()" [routerLink]="['/posts/edit', post.idPost]" class="text-green-500 hover:underline hover:text-green-600 transition duration-200">Редактировать</a>
      <button *ngIf="isAuthor()" (click)="deletePost()" class="text-red-500 hover:underline hover:text-red-600 transition duration-200">Удалить</button>
    </div>
  </div>
  <ng-template #loading>
    <p class="text-gray-500">Загрузка...</p>
  </ng-template>
</div>